import{a as b,r as m,j as e,L as u}from"./index-DG_6d51m.js";import{u as g,E as y}from"./index-CdRRs4BB.js";import{P as c,T as p}from"./trash-2-CHoMRXEp.js";import{U as j,S as w}from"./users-DMUa3YhR.js";import{a as N,E as v}from"./eye-B9CkmP_o.js";import"./createLucideIcon-B-oNeuGo.js";function z(){const{teams:s,addTeam:n,deleteTeam:r,error:l}=b(),[a,i]=m.useState(!1),[t,o]=m.useState({name:"",description:"",color:"#3b82f6"}),[h]=g(),x=()=>{t.name.trim()&&(n({...t,members:[],isVisible:!0}),i(!1),o({name:"",description:"",color:"#3b82f6"}))};return s.length===0?e.jsxs("div",{className:"flex-1 overflow-hidden w-full",children:[e.jsxs("div",{className:"w-full px-4 py-8",children:[e.jsx("div",{className:"flex items-center justify-between md:mb-6 md:mt-0 lg:mb-8",children:e.jsxs("header",{className:"flex w-full max-w-full items-center truncate",children:[e.jsxs("div",{className:"hidden w-full truncate ltr:mr-4 rtl:ml-4 md:block",children:[e.jsx("h3",{className:"font-cal text-emphasis max-w-28 sm:max-w-72 md:max-w-80 inline truncate text-lg font-semibold tracking-wide sm:text-xl md:block xl:max-w-full text-xl",children:"Teams"}),e.jsx("p",{className:"text-default hidden text-sm md:block","data-testid":"subtitle",children:"Manage your teams and control calendar visibility."})]}),e.jsx("div",{className:"flex-shrink-0 [-webkit-app-region:no-drag] md:relative md:bottom-auto md:right-auto",children:e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-900",children:[e.jsx(c,{className:"h-4 w-4 mr-2"}),"New Team"]})})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex w-full flex-col items-center justify-center rounded-lg border border-dashed border-gray-300 p-12 text-center bg-white",children:[e.jsx(j,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Create your first team"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Teams help you organize users and manage calendar visibility across your organization."}),e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-900",children:[e.jsx(c,{className:"h-4 w-4 mr-2"}),"New Team"]})]})})]}),e.jsx(f,{show:a,onClose:()=>{i(!1),o({name:"",description:"",color:"#3b82f6"})},teamData:t,onTeamDataChange:o,onSubmit:x})]}):e.jsxs("div",{className:"flex-1 overflow-hidden w-full",children:[e.jsxs("div",{className:"w-full px-4 py-8",children:[e.jsx("div",{className:"flex items-center justify-between md:mb-6 md:mt-0 lg:mb-8",children:e.jsxs("header",{className:"flex w-full max-w-full items-center truncate",children:[e.jsxs("div",{className:"hidden w-full truncate ltr:mr-4 rtl:ml-4 md:block",children:[e.jsx("h3",{className:"font-cal text-emphasis max-w-28 sm:max-w-72 md:max-w-80 inline truncate text-lg font-semibold tracking-wide sm:text-xl md:block xl:max-w-full text-xl",children:"Teams"}),e.jsx("p",{className:"text-default hidden text-sm md:block","data-testid":"subtitle",children:"Manage your teams and control calendar visibility."})]}),e.jsx("div",{className:"flex-shrink-0 [-webkit-app-region:no-drag] md:relative md:bottom-auto md:right-auto",children:e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-900",children:[e.jsx(c,{className:"h-4 w-4 mr-2"}),"New Team"]})})]})}),l&&e.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4 border border-red-200",children:e.jsx("p",{className:"text-sm text-red-700",children:l})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("ul",{className:"divide-y divide-gray-200","data-testid":"teams",ref:h,children:s.map(d=>e.jsx(k,{team:d,onDelete:()=>r(d.id)},d.id))})})]}),e.jsx(f,{show:a,onClose:()=>{i(!1),o({name:"",description:"",color:"#3b82f6"})},teamData:t,onTeamDataChange:o,onSubmit:x})]})}function k({team:s,onDelete:n}){const[r,l]=m.useState(!1),{toggleTeamVisibility:a}=b();return e.jsx("li",{children:e.jsxs("div",{className:"hover:bg-muted flex items-center justify-between px-3 py-5 transition sm:px-4 hover:bg-gray-50",children:[e.jsx("div",{className:"group flex w-full items-center justify-between",children:e.jsx(u,{to:`/teams/${s.id}`,className:"flex-grow truncate text-sm",title:s.name,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-200",style:{backgroundColor:s.color}}),e.jsxs("div",{children:[e.jsxs("div",{className:"space-x-2 rtl:space-x-reverse",children:[e.jsx("span",{className:"text-emphasis truncate font-medium text-gray-900",children:s.name}),!s.isVisible&&e.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10",children:"Hidden"})]}),e.jsxs("p",{className:"text-subtle mt-1 text-gray-500",children:[s.description&&e.jsx("span",{className:"block",children:s.description}),e.jsxs("span",{className:"block mt-1",children:[s.members.length," member",s.members.length!==1?"s":"",s.members.some(i=>i.isVisible)&&e.jsxs("span",{className:"ml-2 text-xs",children:["â€¢ ",s.members.filter(i=>i.isVisible).length," visible in calendar"]})]})]})]})]})})}),e.jsx("button",{onClick:()=>a(s.id),className:"mr-2 p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100",title:s.isVisible?"Hide team from sidebar":"Show team in sidebar",children:s.isVisible?e.jsx(N,{className:"h-4 w-4"}):e.jsx(v,{className:"h-4 w-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{"data-testid":"team-more",type:"button",onClick:()=>l(!r),className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-gray-300 bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:e.jsx(y,{className:"h-4 w-4"})}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),e.jsxs("div",{className:"absolute right-0 z-20 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[e.jsxs(u,{to:`/teams/${s.id}`,className:"flex w-full items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>l(!1),children:[e.jsx(w,{className:"h-4 w-4 mr-3"}),"Edit team"]}),e.jsxs("button",{onClick:()=>{n(),l(!1)},className:"flex w-full items-center px-4 py-2 text-sm text-red-700 hover:bg-gray-100","data-testid":"delete-team",children:[e.jsx(p,{className:"h-4 w-4 mr-3"}),"Delete"]})]})]})]})]})},s.id)}function f({show:s,onClose:n,teamData:r,onTeamDataChange:l,onSubmit:a}){if(!s)return null;const i=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#f97316","#84cc16"];return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Create new team"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Team name"}),e.jsx("input",{type:"text",id:"name",value:r.name,onChange:t=>l({...r,name:t.target.value}),placeholder:"e.g., Cardiology, Emergency Medicine",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:border-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (optional)"}),e.jsx("textarea",{id:"description",value:r.description,onChange:t=>l({...r,description:t.target.value}),placeholder:"Brief description of the team",rows:2,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:border-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team color"}),e.jsx("div",{className:"flex space-x-2",children:i.map(t=>e.jsx("button",{type:"button",onClick:()=>l({...r,color:t}),className:`w-8 h-8 rounded-full border-2 ${r.color===t?"border-gray-900":"border-gray-200"}`,style:{backgroundColor:t}},t))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{onClick:a,disabled:!r.name.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-gray-900 border border-transparent rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Team"})]})]})})}export{z as component};
