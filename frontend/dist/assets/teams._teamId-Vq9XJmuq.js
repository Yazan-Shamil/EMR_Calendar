import{e as A,a as E,r as c,j as e,L as y}from"./index-DG_6d51m.js";import{u as F,E as V}from"./index-CdRRs4BB.js";import{A as j}from"./arrow-left-B1uEigA9.js";import{S as v,U as I}from"./users-DMUa3YhR.js";import{P as N,T as D}from"./trash-2-CHoMRXEp.js";import{U as w}from"./user-Cj8rdwd4.js";import{c as U}from"./createLucideIcon-B-oNeuGo.js";import{M as z}from"./mail-DPjIhAQJ.js";import{a as P,E as R}from"./eye-B9CkmP_o.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],H=U("shield",L);function Y(){const{teamId:r}=A({from:"/teams/$teamId"}),{teams:b,updateTeam:t,addMemberToTeam:m,updateTeamMember:h,removeMemberFromTeam:i,toggleMemberVisibility:x}=E(),s=b.find(a=>a.id===parseInt(r)),[u,l]=c.useState(!1),[o,g]=c.useState(!1),[d,n]=c.useState({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",color:(s==null?void 0:s.color)||"#3b82f6"}),[f,p]=c.useState({name:"",email:"",role:"member"}),[C]=F();if(!s)return e.jsx("div",{className:"flex-1 overflow-hidden w-full",children:e.jsx("div",{className:"w-full px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Team not found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"The team you're looking for doesn't exist."}),e.jsxs(y,{to:"/teams",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Back to Teams"]})]})})});const k=()=>{t(s.id,d),g(!1)},M=()=>{!f.name.trim()||!f.email.trim()||(m(s.id,{...f,isVisible:!0}),l(!1),p({name:"",email:"",role:"member"}))},T=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#f97316","#84cc16"];return e.jsxs("div",{className:"flex-1 overflow-hidden w-full",children:[e.jsxs("div",{className:"w-full px-4 py-8",children:[e.jsx("div",{className:"flex items-center justify-between md:mb-6 md:mt-0 lg:mb-8",children:e.jsxs("header",{className:"flex w-full max-w-full items-center truncate",children:[e.jsx(y,{to:"/teams",className:"mr-4 p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100",children:e.jsx(j,{className:"h-5 w-5"})}),e.jsx("div",{className:"hidden w-full truncate ltr:mr-4 rtl:ml-4 md:block",children:o?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:d.name,onChange:a=>n({...d,name:a.target.value}),className:"text-xl font-semibold bg-transparent border-b border-gray-300 focus:border-gray-900 outline-none"}),e.jsx("textarea",{value:d.description,onChange:a=>n({...d,description:a.target.value}),placeholder:"Team description",rows:1,className:"text-sm text-gray-500 bg-transparent border-b border-gray-200 focus:border-gray-900 outline-none w-full resize-none"})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border border-gray-200",style:{backgroundColor:s.color}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-cal text-emphasis text-xl font-semibold",children:s.name}),s.description&&e.jsx("p",{className:"text-default text-sm",children:s.description})]})]})}),e.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:o?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{g(!1),n({name:s.name,description:s.description||"",color:s.color})},className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:k,className:"px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800",children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-800",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Add Member"]})]})})]})}),o&&e.jsxs("div",{className:"mb-6 bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team color"}),e.jsx("div",{className:"flex space-x-2",children:T.map(a=>e.jsx("button",{type:"button",onClick:()=>n({...d,color:a}),className:`w-8 h-8 rounded-full border-2 ${d.color===a?"border-gray-900":"border-gray-200"}`,style:{backgroundColor:a}},a))})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Team Members (",s.members.length,")"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.members.filter(a=>a.isVisible).length," visible in calendar"]})]})}),s.members.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(w,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No team members yet"}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Add first member"]})]}):e.jsx("ul",{className:"divide-y divide-gray-200",ref:C,children:s.members.map(a=>e.jsx(_,{member:a,teamId:s.id,onToggleVisibility:()=>x(s.id,a.id),onUpdateMember:S=>h(s.id,a.id,S),onRemoveMember:()=>i(s.id,a.id)},a.id))})]})]}),e.jsx($,{show:u,onClose:()=>{l(!1),p({name:"",email:"",role:"member"})},memberData:f,onMemberDataChange:p,onSubmit:M})]})}function _({member:r,teamId:b,onToggleVisibility:t,onUpdateMember:m,onRemoveMember:h}){const[i,x]=c.useState(!1),[s,u]=c.useState(!1),[l,o]=c.useState({name:r.name,email:r.email,role:r.role}),g=()=>{m(l),u(!1)},d=()=>{o({name:r.name,email:r.email,role:r.role}),u(!1)};return e.jsx("li",{children:e.jsx("div",{className:"px-4 py-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx(w,{className:"h-5 w-5 text-gray-600"})}),e.jsx("div",{className:"flex-1",children:s?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:l.name,onChange:n=>o({...l,name:n.target.value}),className:"block w-full text-sm border border-gray-300 rounded px-2 py-1",placeholder:"Member name"}),e.jsx("input",{type:"email",value:l.email,onChange:n=>o({...l,email:n.target.value}),className:"block w-full text-sm border border-gray-300 rounded px-2 py-1",placeholder:"Member email"}),e.jsxs("select",{value:l.role,onChange:n=>o({...l,role:n.target.value}),className:"block text-sm border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.name}),r.role==="admin"&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"Admin"]}),!r.isVisible&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:"Hidden"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),r.email]})]})})]}),e.jsx("div",{className:"flex items-center space-x-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,className:"text-xs px-2 py-1 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{onClick:g,className:"text-xs px-2 py-1 bg-gray-900 text-white rounded hover:bg-gray-800",children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100",title:r.isVisible?"Hide from calendar":"Show in calendar",children:r.isVisible?e.jsx(P,{className:"h-4 w-4"}):e.jsx(R,{className:"h-4 w-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>x(!i),className:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100",children:e.jsx(V,{className:"h-4 w-4"})}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>x(!1)}),e.jsxs("div",{className:"absolute right-0 z-20 mt-2 w-40 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:[e.jsxs("button",{onClick:()=>{u(!0),x(!1)},className:"flex w-full items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>{h(),x(!1)},className:"flex w-full items-center px-3 py-2 text-sm text-red-700 hover:bg-gray-100",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})]})]})})]})})})}function $({show:r,onClose:b,memberData:t,onMemberDataChange:m,onSubmit:h}){return r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Add team member"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"member-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),e.jsx("input",{type:"text",id:"member-name",value:t.name,onChange:i=>m({...t,name:i.target.value}),placeholder:"Dr. John Smith",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:border-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-900",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"member-email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"member-email",value:t.email,onChange:i=>m({...t,email:i.target.value}),placeholder:"john.smith@hospital.com",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:border-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"member-role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("select",{id:"member-role",value:t.role,onChange:i=>m({...t,role:i.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:h,disabled:!t.name.trim()||!t.email.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-gray-900 border border-transparent rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Member"})]})]})}):null}export{Y as component};
