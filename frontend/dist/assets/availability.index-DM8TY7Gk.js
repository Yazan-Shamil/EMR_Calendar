import{c as y,r as x,j as e,L as p,f as w}from"./index-DG_6d51m.js";import{u as j,E as N}from"./index-CdRRs4BB.js";import{P as u,T as v}from"./trash-2-CHoMRXEp.js";import{C as k}from"./clock-DHURZwB9.js";import{c as b}from"./createLucideIcon-B-oNeuGo.js";import{C}from"./copy-n8OosNOK.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],D=b("globe",S);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],L=b("star",A);function P(){const{schedules:t,addSchedule:i,deleteSchedule:r,setDefault:o,duplicateSchedule:d,error:a}=y(),[l,s]=x.useState(!1),[n,c]=x.useState(""),[g]=j(),f=()=>{n.trim()&&(i({name:n,isDefault:!1,timeZone:"America/New_York",availability:[{days:[1,2,3,4,5],startTime:new Date("1970-01-01T09:00:00.000Z"),endTime:new Date("1970-01-01T17:00:00.000Z")}]}),s(!1),c(""))};return t.length===0?e.jsxs("div",{className:"flex-1 overflow-hidden w-full",children:[e.jsxs("div",{className:"w-full px-4 py-8",children:[e.jsx("div",{className:"flex items-center justify-between md:mb-6 md:mt-0 lg:mb-8",children:e.jsxs("header",{className:"flex w-full max-w-full items-center truncate",children:[e.jsxs("div",{className:"hidden w-full truncate ltr:mr-4 rtl:ml-4 md:block",children:[e.jsx("h3",{className:"font-cal text-emphasis max-w-28 sm:max-w-72 md:max-w-80 inline truncate text-lg font-semibold tracking-wide sm:text-xl md:block xl:max-w-full text-xl",children:"Availability"}),e.jsx("p",{className:"text-default hidden text-sm md:block","data-testid":"subtitle",children:"Configure times when you are available for bookings."})]}),e.jsx("div",{className:"flex-shrink-0 [-webkit-app-region:no-drag] md:relative md:bottom-auto md:right-auto",children:e.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-900",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"New"]})})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex w-full flex-col items-center justify-center rounded-lg border border-dashed border-gray-300 p-12 text-center bg-white",children:[e.jsx(k,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Add your first schedule"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Schedule allows you to control available time slots that people can book you for."}),e.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-900",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"New"]})]})})]}),e.jsx(h,{show:l,onClose:()=>{s(!1),c("")},scheduleName:n,onScheduleNameChange:c,onSubmit:f})]}):e.jsxs("div",{className:"flex-1 overflow-hidden w-full",children:[e.jsxs("div",{className:"w-full px-4 py-8",children:[e.jsx("div",{className:"flex items-center justify-between md:mb-6 md:mt-0 lg:mb-8",children:e.jsxs("header",{className:"flex w-full max-w-full items-center truncate",children:[e.jsxs("div",{className:"hidden w-full truncate ltr:mr-4 rtl:ml-4 md:block",children:[e.jsx("h3",{className:"font-cal text-emphasis max-w-28 sm:max-w-72 md:max-w-80 inline truncate text-lg font-semibold tracking-wide sm:text-xl md:block xl:max-w-full text-xl",children:"Availability"}),e.jsx("p",{className:"text-default hidden text-sm md:block","data-testid":"subtitle",children:"Configure times when you are available for bookings."})]}),e.jsx("div",{className:"flex-shrink-0 [-webkit-app-region:no-drag] md:relative md:bottom-auto md:right-auto",children:e.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-900",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"New"]})})]})}),a&&e.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4 border border-red-200",children:e.jsx("p",{className:"text-sm text-red-700",children:a})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("ul",{className:"divide-y divide-gray-200","data-testid":"schedules",ref:g,children:t.map(m=>e.jsx(T,{schedule:m,isDeletable:t.length!==1,onDelete:()=>r(m.id),onSetDefault:()=>o(m.id),onDuplicate:()=>d(m.id)},m.id))})})]}),e.jsx(h,{show:l,onClose:()=>{s(!1),c("")},scheduleName:n,onScheduleNameChange:c,onSubmit:f})]})}function T({schedule:t,isDeletable:i,onDelete:r,onSetDefault:o,onDuplicate:d}){const[a,l]=x.useState(!1);return e.jsx("li",{children:e.jsxs("div",{className:"hover:bg-muted flex items-center justify-between px-3 py-5 transition sm:px-4 hover:bg-gray-50",children:[e.jsx("div",{className:"group flex w-full items-center justify-between",children:e.jsxs(p,{to:`/availability/${t.id}`,className:"flex-grow truncate text-sm",title:t.name,children:[e.jsxs("div",{className:"space-x-2 rtl:space-x-reverse",children:[e.jsx("span",{className:"text-emphasis truncate font-medium text-gray-900",children:t.name}),t.isDefault&&e.jsx("span",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:"Default"})]}),e.jsxs("p",{className:"text-subtle mt-1 text-gray-500",children:[t.availability.filter(s=>!!s.days.length).map((s,n)=>e.jsxs("span",{children:[w(s,!0),e.jsx("br",{})]},n)),t.timeZone&&e.jsxs("p",{className:"my-1 flex items-center text-xs text-gray-500",children:[e.jsx(D,{className:"h-3.5 w-3.5 mr-1"}),t.timeZone]})]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{"data-testid":"schedule-more",type:"button",onClick:()=>l(!a),className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-gray-300 bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:e.jsx(N,{className:"h-4 w-4"})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),e.jsxs("div",{className:"absolute right-0 z-20 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[!t.isDefault&&e.jsxs("button",{onClick:()=>{o(),l(!1)},className:"flex w-full items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(L,{className:"h-4 w-4 mr-3"}),"Set as default"]}),e.jsxs("button",{onClick:()=>{d(),l(!1)},className:"flex w-full items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100","data-testid":`schedule-duplicate${t.id}`,children:[e.jsx(C,{className:"h-4 w-4 mr-3"}),"Duplicate"]}),e.jsxs("button",{onClick:()=>{i&&r(),l(!1)},disabled:!i,className:"flex w-full items-center px-4 py-2 text-sm text-red-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"delete-schedule",children:[e.jsx(v,{className:"h-4 w-4 mr-3"}),"Delete"]})]})]})]})]})},t.id)}function h({show:t,onClose:i,scheduleName:r,onScheduleNameChange:o,onSubmit:d}){return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Add new schedule"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),e.jsx("input",{type:"text",id:"name",value:r,onChange:a=>o(a.target.value),placeholder:"Default Schedule",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:border-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0,autoFocus:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{onClick:d,disabled:!r.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-gray-900 border border-transparent rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue"})]})]})}):null}export{P as component};
