import{r as d,d as c,j as e,u as R,R as _}from"./index-DG_6d51m.js";import{B as x,i as A,f as J,g as U,a as Q,I,A as G}from"./AppLayout-C8NN6h43.js";import{c as P}from"./utils-CTKVyNGs.js";import{I as L}from"./input-Epi4Dl8E.js";import{c as X}from"./createLucideIcon-B-oNeuGo.js";import{C as q}from"./clock-DHURZwB9.js";import{U as F}from"./user-Cj8rdwd4.js";import"./chevron-down-Ca7sxcSa.js";import"./eye-B9CkmP_o.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Z=X("x",K),V=({isOpen:l,onClose:i,selectedDate:u,selectedTime:r,onSave:f,position:b})=>{const[N,p]=d.useState("event"),[m,h]=d.useState({title:"",date:c().format("YYYY-MM-DD"),startTime:"11:30",endTime:"12:30",timezone:"America/New_York",location:"",patientName:""});d.useEffect(()=>{l&&(h({title:"",date:u?c(u).format("YYYY-MM-DD"):c().format("YYYY-MM-DD"),startTime:r||"09:00",endTime:r?c(`2000-01-01 ${r}`,"HH:mm").add(1,"hour").format("HH:mm"):"10:00",timezone:"America/New_York",location:"",patientName:""}),C(""),y(!1))},[l,u,r]);const[w,C]=d.useState(""),[T,y]=d.useState(!1),M=d.useRef(null),[z,$]=d.useState(!1),[E,v]=d.useState(!1),k=d.useRef(null),t=d.useRef(null),o=["John Smith","Sarah Johnson","Michael Brown","Emily Davis","David Wilson","Lisa Anderson","Robert Taylor"].filter(s=>s.toLowerCase().includes(w.toLowerCase())),n=Array.from({length:13},(s,j)=>{const Y=(j+7).toString().padStart(2,"0");return[`${Y}:00`,`${Y}:30`]}).flat();d.useEffect(()=>{const s=j=>{M.current&&!M.current.contains(j.target)&&y(!1),k.current&&!k.current.contains(j.target)&&$(!1),t.current&&!t.current.contains(j.target)&&v(!1)};if(T||z||E)return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[T,z,E]);const g=s=>{s.preventDefault(),f&&f(m),i()},S=(s,j)=>{h(Y=>({...Y,[s]:j}))},H=s=>{h(j=>({...j,patientName:s})),C(s),y(!1)},D=s=>{S("startTime",s),$(!1)},O=s=>{S("endTime",s),v(!1)};if(!l)return null;const B=b?{position:"fixed",left:`${Math.min(b.x+5,window.innerWidth-400)}px`,top:`${Math.min(b.y-10,window.innerHeight-600)}px`,zIndex:50}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:50};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:i}),e.jsxs("div",{className:"bg-default border border-subtle rounded-lg shadow-2xl w-96",style:B,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-subtle",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Add title",value:m.title,onChange:s=>S("title",s.target.value),className:"text-lg font-medium bg-transparent border-none outline-none text-emphasis placeholder:text-default w-full border-b-2 border-blue-500 pb-1",autoFocus:!0})}),e.jsx("button",{onClick:i,className:"ml-4 p-1 hover:bg-subtle rounded-md transition-colors",children:e.jsx(Z,{className:"h-5 w-5 text-default"})})]}),e.jsx("div",{className:"bg-default p-3 border-b border-subtle",children:e.jsxs("div",{className:"flex items-center bg-default rounded-lg p-1 border border-subtle w-full",children:[e.jsx(x,{variant:N==="event"?"default":"ghost",size:"sm",onClick:()=>p("event"),className:"flex-1 capitalize",children:"Event"}),e.jsx(x,{variant:N==="block"?"default":"ghost",size:"sm",onClick:()=>p("block"),className:"flex-1 capitalize",children:"Block"})]})}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q,{className:"h-5 w-5 text-default flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-emphasis mb-2",children:c(m.date).format("dddd, MMMM D")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",ref:k,children:[e.jsx(L,{type:"text",value:m.startTime,onClick:()=>$(!0),className:"w-20 text-xs cursor-pointer",readOnly:!0}),z&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-default border border-subtle rounded-md shadow-lg z-50 max-h-40 overflow-y-auto",children:n.map(s=>e.jsx("button",{type:"button",onClick:()=>D(s),className:"w-full text-left px-3 py-2 text-sm text-emphasis hover:bg-subtle transition-colors",children:s},s))})]}),e.jsx("span",{className:"text-default text-xs",children:"â€“"}),e.jsxs("div",{className:"relative",ref:t,children:[e.jsx(L,{type:"text",value:m.endTime,onClick:()=>v(!0),className:"w-20 text-xs cursor-pointer",readOnly:!0}),E&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-default border border-subtle rounded-md shadow-lg z-50 max-h-40 overflow-y-auto",children:n.map(s=>e.jsx("button",{type:"button",onClick:()=>O(s),className:"w-full text-left px-3 py-2 text-sm text-emphasis hover:bg-subtle transition-colors",children:s},s))})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(F,{className:"h-5 w-5 text-default flex-shrink-0"}),e.jsxs("div",{className:"flex-1 relative",ref:M,children:[e.jsx(L,{type:"text",placeholder:"Search patient name",value:w,onChange:s=>{C(s.target.value),y(!0),S("patientName",s.target.value)},onFocus:()=>y(!0),className:"w-full"}),T&&o.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-default border border-subtle rounded-md shadow-lg z-50 max-h-40 overflow-y-auto",children:o.map(s=>e.jsx("button",{type:"button",onClick:()=>H(s),className:"w-full text-left px-3 py-2 text-sm text-emphasis hover:bg-subtle transition-colors",children:s},s))})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4 border-t border-subtle",children:[e.jsx("div",{className:"w-8 h-8 bg-subtle rounded flex items-center justify-center",children:e.jsx(F,{className:"h-4 w-4 text-default"})}),e.jsx("span",{className:"text-sm text-emphasis",children:"John Doe"})]}),e.jsx("div",{className:"pt-4",children:e.jsx(x,{type:"submit",variant:"default",className:"w-full py-3",children:"Set up the schedule"})})]})]})]})},W=({days:l,className:i})=>{const{events:u,startHour:r,endHour:f,setEvents:b}=R(),[N,p]=d.useState(!1),[m,h]=d.useState(null),[w,C]=d.useState(null),[T,y]=d.useState(null),M=d.useMemo(()=>{const t=[];for(let a=r;a<=f;a++)t.push(a);return t},[r,f]),z=t=>u.filter(a=>{const o=c(a.start).startOf("day"),n=c(t).startOf("day");return o.isSame(n)}),$=(t,a,o)=>{const n=o.target.getBoundingClientRect();h(t),C(`${a.toString().padStart(2,"0")}:00`),y({x:n.left+n.width/2,y:n.top+n.height/2}),p(!0)},E=t=>{const a=c(`${t.date} ${t.startTime}`),o=c(`${t.date} ${t.endTime}`),n={id:Date.now().toString(),title:t.title||"Untitled Event",start:a.toDate(),end:o.toDate(),color:"#3b82f6"};b([...u,n])},v=80,k=64;return e.jsxs("div",{className:P("flex flex-col h-full overflow-hidden",i),children:[e.jsxs("div",{className:"flex-shrink-0 grid overflow-hidden",style:{gridTemplateColumns:`80px repeat(${l.length}, 1fr)`},children:[e.jsx("div",{className:"bg-default border-b border-r border-subtle",style:{height:`${k}px`}}),l.map(t=>e.jsxs("div",{className:"bg-default border-b border-r border-subtle last:border-r-0 p-2 text-center flex flex-col justify-center",style:{height:`${k}px`},children:[e.jsx("div",{className:"text-sm font-medium text-default",children:c(t).format("ddd")}),e.jsx("div",{className:P("text-lg font-semibold",A(t)?"text-brand":"text-emphasis"),children:c(t).format("D")}),A(t)&&e.jsx("div",{className:"w-2 h-2 bg-brand rounded-full mx-auto mt-1"})]},t.toISOString()))]}),e.jsx("div",{className:"flex-1 overflow-auto relative min-h-0",style:{maxHeight:"calc(100vh - 200px)"},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"grid",style:{gridTemplateColumns:`80px repeat(${l.length}, 1fr)`},children:M.map((t,a)=>e.jsxs(_.Fragment,{children:[e.jsx("div",{className:"sticky left-0 z-10 bg-muted/50 border-r border-b border-subtle p-2 text-xs text-default flex items-start",style:{height:`${v}px`},children:e.jsx("span",{className:"mt-[-8px]",children:J(t)})}),l.map((o,n)=>e.jsxs("div",{className:"relative border-r border-b border-subtle last:border-r-0 hover:bg-subtle/20 cursor-pointer",style:{height:`${v}px`},onClick:g=>$(o,t,g),children:[e.jsx("div",{className:"absolute w-full border-b border-subtle/30",style:{top:"25%"}}),e.jsx("div",{className:"absolute w-full border-b border-subtle/50",style:{top:"50%"}}),e.jsx("div",{className:"absolute w-full border-b border-subtle/30",style:{top:"75%"}})]},`${o.toISOString()}-${t}`))]},t))}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 pointer-events-none",style:{display:"grid",gridTemplateColumns:`80px repeat(${l.length}, 1fr)`},children:[e.jsx("div",{}),l.map(t=>e.jsx("div",{className:"relative pointer-events-auto",children:z(t).map(a=>{const o=c(a.start),n=c(a.end),g=(o.hour()-r)*60+o.minute(),H=(n.hour()-r)*60+n.minute()-g,D=g/60*v,O=Math.max(H/60*v,20);return e.jsx("div",{className:"absolute left-1 right-1 bg-blue-500 text-white text-xs rounded shadow-sm cursor-pointer hover:bg-blue-600 transition-colors overflow-hidden z-20",style:{top:`${D}px`,height:`${O}px`,backgroundColor:a.color||void 0},children:e.jsxs("div",{className:"p-1.5",children:[e.jsx("div",{className:"font-semibold truncate",children:a.title}),e.jsxs("div",{className:"text-[10px] opacity-90",children:[o.format("h:mma")," - ",n.format("h:mma")]})]})},a.id)})},`events-${t.toISOString()}`))]}),(()=>{const t=c(),a=t.hour(),o=t.minute();if(a>=r&&a<=f){const n=l.findIndex(g=>A(g));if(n!==-1){const S=((a-r)*60+o)/60*v;return e.jsxs("div",{className:"absolute left-0 right-0 pointer-events-none z-30 grid",style:{top:`${S}px`,gridTemplateColumns:`80px repeat(${l.length}, 1fr)`},children:[e.jsx("div",{}),l.map((H,D)=>e.jsx("div",{className:"relative",children:D===n&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full -ml-1.5"}),e.jsx("div",{className:"flex-1 h-[2px] bg-red-500"})]})},`indicator-${D}`))]})}}return null})()]})}),e.jsx(V,{isOpen:N,onClose:()=>p(!1),selectedDate:m||void 0,selectedTime:w||void 0,onSave:E,position:T||void 0})]})},ee=({className:l,onViewChange:i})=>{const{currentDate:u,view:r,setView:f,navigatePrevious:b,navigateNext:N,navigateToday:p}=R(),{days:m}=U(u),h=w=>{f(w),i==null||i(w)};return e.jsxs("div",{className:P("bg-white border border-subtle rounded-lg overflow-hidden flex flex-col h-full",l),children:[e.jsx("div",{className:"bg-white border-b border-subtle p-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("h2",{className:"text-xl font-semibold text-emphasis",children:Q(m[0],m[6])})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"icon",size:"sm",onClick:b,className:"hover:bg-subtle",children:e.jsx(I,{name:"chevron-left",className:"h-4 w-4"})}),e.jsx(x,{variant:"secondary",size:"sm",onClick:p,children:"Today"}),e.jsx(x,{variant:"icon",size:"sm",onClick:N,className:"hover:bg-subtle",children:e.jsx(I,{name:"chevron-right",className:"h-4 w-4"})})]}),i&&e.jsxs("div",{className:"flex items-center bg-default rounded-lg p-1 border border-subtle",children:[e.jsx(x,{variant:r==="day"?"default":"ghost",size:"sm",onClick:()=>h("day"),className:"min-w-16",children:"Day"}),e.jsx(x,{variant:r==="week"?"default":"ghost",size:"sm",onClick:()=>h("week"),className:"min-w-16",children:"Week"})]})]})]})}),e.jsx(W,{days:m,className:"flex-1 min-h-0"})]})},te=({className:l,onViewChange:i})=>{const{currentDate:u,view:r,setView:f,navigatePrevious:b,navigateNext:N,navigateToday:p}=R(),m=h=>{f(h),i==null||i(h)};return e.jsxs("div",{className:P("bg-default border border-subtle rounded-lg overflow-hidden flex flex-col h-full",l),children:[e.jsx("div",{className:"bg-white border-b border-subtle p-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("h2",{className:"text-xl font-semibold text-emphasis",children:c(u).format("dddd, MMMM D, YYYY")})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"icon",size:"sm",onClick:b,className:"hover:bg-subtle",children:e.jsx(I,{name:"chevron-left",className:"h-4 w-4"})}),e.jsx(x,{variant:"secondary",size:"sm",onClick:p,children:"Today"}),e.jsx(x,{variant:"icon",size:"sm",onClick:N,className:"hover:bg-subtle",children:e.jsx(I,{name:"chevron-right",className:"h-4 w-4"})})]}),i&&e.jsxs("div",{className:"flex items-center bg-default rounded-lg p-1 border border-subtle",children:[e.jsx(x,{variant:r==="day"?"default":"ghost",size:"sm",onClick:()=>m("day"),className:"min-w-16",children:"Day"}),e.jsx(x,{variant:r==="week"?"default":"ghost",size:"sm",onClick:()=>m("week"),className:"min-w-16",children:"Week"})]})]})]})}),e.jsx(W,{days:[u],className:"flex-1 min-h-0"})]})};function ue(){const{view:l,setView:i,setEvents:u}=R();return d.useEffect(()=>{const r=[{id:"1",title:"Team Standup",start:new Date(new Date().setHours(9,0,0,0)),end:new Date(new Date().setHours(9,30,0,0)),color:"#3b82f6"},{id:"2",title:"Product Review",start:new Date(new Date().setHours(11,0,0,0)),end:new Date(new Date().setHours(12,0,0,0)),color:"#10b981"},{id:"3",title:"Client Meeting",start:new Date(new Date().setHours(14,0,0,0)),end:new Date(new Date().setHours(15,30,0,0)),color:"#f59e0b"}];u(r)},[]),e.jsx(G,{children:e.jsx("div",{className:"flex-1 p-4 overflow-hidden",children:l==="week"?e.jsx(ee,{onViewChange:i,className:"w-full h-full"}):e.jsx(te,{onViewChange:i,className:"w-full h-full"})})})}export{ue as component};
