import{h as C,c as E,j as e,L as j,r as x}from"./index-DG_6d51m.js";import{A as L}from"./arrow-left-B1uEigA9.js";import{C as y}from"./copy-n8OosNOK.js";import{T as b,P as v}from"./trash-2-CHoMRXEp.js";import{c as Z}from"./createLucideIcon-B-oNeuGo.js";import{C as W}from"./chevron-down-Ca7sxcSa.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],M=Z("info",_);function B(){const{scheduleId:c}=C.useParams(),{schedules:u,updateSchedule:l}=E(),d=u.find(h=>h.id===parseInt(c));return d?e.jsx(P,{schedule:d,onUpdate:l}):e.jsx("div",{className:"flex-1 overflow-hidden w-full",children:e.jsx("div",{className:"w-full px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Schedule not found"}),e.jsx(j,{to:"/availability",className:"text-sm text-gray-600 hover:text-gray-900 underline",children:"Back to availability"})]})})})}function P({schedule:c,onUpdate:u}){const[l,d]=x.useState(c),[h,i]=x.useState(!1),[o,m]=x.useState(()=>{const t=Array.from({length:7},(a,s)=>({enabled:!1,timeSlots:[]}));return c.availability.forEach(a=>{a.days.forEach(s=>{t[s]&&(t[s].enabled=!0,t[s].timeSlots.push({startTime:a.startTime,endTime:a.endTime}))})}),t.forEach(a=>{a.enabled&&a.timeSlots.length===0&&a.timeSlots.push({startTime:new Date("1970-01-01T09:00:00.000Z"),endTime:new Date("1970-01-01T17:00:00.000Z")})}),t});x.useEffect(()=>{d(c),i(!1)},[c]);const w=()=>{const t=[];o.forEach((a,s)=>{a.enabled&&a.timeSlots.forEach(r=>{t.push({days:[s],startTime:r.startTime,endTime:r.endTime})})}),u(c.id,{...l,availability:t}),i(!1)},N=(t,a)=>{const s=[...o];s[t]={enabled:a,timeSlots:a?[{startTime:new Date("1970-01-01T09:00:00.000Z"),endTime:new Date("1970-01-01T17:00:00.000Z")}]:[]},m(s),i(!0)},f=(t,a,s,r)=>{const n=[...o];n[t].timeSlots[a][s]=r,m(n),i(!0)},T=t=>{const a=[...o];a[t].timeSlots.push({startTime:new Date("1970-01-01T09:00:00.000Z"),endTime:new Date("1970-01-01T17:00:00.000Z")}),m(a),i(!0)},k=(t,a)=>{const s=[...o];s[t].timeSlots.splice(a,1),s[t].timeSlots.length===0&&(s[t].enabled=!1),m(s),i(!0)},S=(t,a)=>{const s=o[t].timeSlots[a],r=[...o];r.forEach((n,D)=>{D!==t&&n.enabled&&n.timeSlots.push({startTime:new Date(s.startTime),endTime:new Date(s.endTime)})}),m(r),i(!0)},g=t=>new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}).format(t),p=t=>{const[a,s]=t.split(":").map(Number);return new Date(`1970-01-01T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:00.000Z`)},A=[{name:"Sunday",index:0},{name:"Monday",index:1},{name:"Tuesday",index:2},{name:"Wednesday",index:3},{name:"Thursday",index:4},{name:"Friday",index:5},{name:"Saturday",index:6}];return e.jsx("div",{className:"flex-1 overflow-hidden w-full",children:e.jsxs("div",{className:"w-full px-4 py-8",children:[e.jsx("div",{className:"flex items-center justify-between md:mb-6 md:mt-0 lg:mb-8",children:e.jsxs("header",{className:"flex w-full max-w-full items-center truncate",children:[e.jsx(j,{to:"/availability",className:"mr-4 flex items-center text-gray-600 hover:text-gray-900",children:e.jsx(L,{className:"h-4 w-4"})}),e.jsxs("div",{className:"hidden w-full truncate ltr:mr-4 rtl:ml-4 md:block",children:[e.jsx("h3",{className:"font-cal text-emphasis max-w-28 sm:max-w-72 md:max-w-80 inline truncate text-lg font-semibold tracking-wide sm:text-xl md:block xl:max-w-full text-xl",children:l.name}),e.jsx("p",{className:"text-default hidden text-sm md:block text-gray-600",children:"Mon - Fri, 9:00 AM - 5:00 PM"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Set to Default"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.isDefault,onChange:t=>{d({...l,isDefault:t.target.checked}),i(!0)},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-900"})]})]}),e.jsx("button",{className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-gray-300 bg-white text-gray-400 hover:text-gray-500",children:e.jsx(y,{className:"h-4 w-4"})}),e.jsx("button",{className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-gray-300 bg-white text-red-400 hover:text-red-500",children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx("button",{onClick:w,disabled:!h,className:"px-4 py-2 text-sm font-medium text-white bg-gray-900 border border-transparent rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:e.jsx("div",{className:"space-y-0",children:A.map(t=>{const a=o[t.index];return e.jsxs("div",{className:"flex items-start justify-between py-4 px-6 border-b border-gray-200 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-shrink-0",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enabled,onChange:s=>N(t.index,s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-900"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 w-20",children:t.name})]}),a.enabled&&e.jsx("div",{className:"flex-1 space-y-2",children:a.timeSlots.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx("input",{type:"time",value:g(s.startTime),onChange:n=>f(t.index,r,"startTime",p(n.target.value)),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-gray-900 focus:border-gray-900"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("input",{type:"time",value:g(s.endTime),onChange:n=>f(t.index,r,"endTime",p(n.target.value)),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-gray-900 focus:border-gray-900"}),e.jsx("button",{onClick:()=>T(t.index),className:"text-gray-400 hover:text-gray-600 p-1",title:"Add time slot",children:e.jsx(v,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>S(t.index,r),className:"text-gray-400 hover:text-gray-600 p-1",title:"Copy to other days",children:e.jsx(y,{className:"h-4 w-4"})}),a.timeSlots.length>1&&e.jsx("button",{onClick:()=>k(t.index,r),className:"text-gray-400 hover:text-red-600 p-1",title:"Remove time slot",children:e.jsx(b,{className:"h-4 w-4"})})]},r))})]},t.index)})})}),e.jsxs("div",{className:"mt-8 bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Date overrides"}),e.jsx(M,{className:"h-4 w-4 text-gray-400"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add dates when your availability changes from your daily hours."}),e.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(v,{className:"h-4 w-4"}),"Add an override"]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Timezone"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:l.timeZone,onChange:t=>{d({...l,timeZone:t.target.value}),i(!0)},className:"w-full appearance-none border border-gray-300 rounded-md px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-1 focus:ring-gray-900 focus:border-gray-900",children:[e.jsx("option",{value:"America/Toronto",children:"America/Toronto"}),e.jsx("option",{value:"America/New_York",children:"America/New_York"}),e.jsx("option",{value:"America/Los_Angeles",children:"America/Los_Angeles"}),e.jsx("option",{value:"Europe/London",children:"Europe/London"}),e.jsx("option",{value:"Asia/Tokyo",children:"Asia/Tokyo"})]}),e.jsx(W,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]})})]})]})})}export{B as component};
